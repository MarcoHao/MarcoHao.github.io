<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <!--è§†çª—ç¼©æ”¾-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Marcoâ€™s homepage</title>
  <!--å¤–éƒ¨èµ„æº-->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600&family=Noto+Serif+SC:wght@400;600&family=Inter:wght@400;600&family=Fira+Code&display=swap" rel="stylesheet">
  <!--æ ·å¼è¡¨-->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script>
    /* global tailwind */
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            'klein-blue': '#0021A5',
          },
        }
      }
    }
  </script>

  <link rel="stylesheet" href="test2.css">
</head>

<body class="
  font-sans            <!-- å­—ä½“ -->
  bg-white             <!-- èƒŒæ™¯ -->
  text-slate-900       <!-- æ–‡å­—é¢œè‰² -->
  light                <!-- è‡ªå®šä¹‰æ ‡è®°ï¼ˆæµ…è‰²ä¸»é¢˜ï¼‰ -->
">
  <!-- Navigation -->
  <nav class = "nav">  <!--ä¿è¯åœ¨å…¶ä»–å…ƒç´ ä¸Šæ–¹-->
    <div class="w-full mx-auto px-4 sm:px-6 lg:px-8">  <!--å¤–å±‚å®¹å™¨-->
      <div class = "flex justify-between items-center h-16">  <!--justify-between å°±æå®šå·¦å³åˆ†å¸ƒã€‚-->
        <div class="flex items-center space-x-2">
          <a href="index.html" class="nav-brand">Marco</a>
        </div>
        <div class="flex items-center space-x-6">
          <div class="nav-button md:flex space-x-6 text-sm">
            <a href="#ai-section" class="nav-link">AI</a>
            <a href="#code-section" class="nav-link">Code</a>
            <a href="#design-section" class="nav-link">Design</a>
            <a href="#experience-section" class="nav-link">Experience</a>
            <a href="#about" class="nav-link">About</a>
<!--            <a href="#contact" class="nav-link">Contact</a>-->
          </div>
          <div id="modeToggle" class="mode-toggle">
            <svg class="mode-icon" viewBox="0 0 24 24"></svg>
          </div>
        </div>
      </div>
    </div>
  </nav>

  <!-- Hero Section -->
  <section id="home" class="relative min-h-screen hero">
    <!-- å›¾ç‰‡èƒŒæ™¯ï¼ˆåˆå§‹éšè—ï¼‰ -->
    <div class="hero-bg" style="background-image: url('assets/images/background/02.png');"></div>

    <!-- è§†é¢‘èƒŒæ™¯ï¼ˆåˆå§‹éšè—ï¼‰ -->
    <video
      class="hero-video"
      muted
      loop
      playsinline
      webkit-playsinline
      style="display: none; position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover; z-index: -2;"
    >
      <source src="" type="video/mp4">
    </video>

    <!-- å†…å®¹å±‚ -->
    <div class="hero-inner relative z-10 w-full">
      <div class="hero-content-block ">
        <div class="hero-content">
          <h1 class="hero-name "><span>é©¬æ˜Š Marco</span></h1>
          <p class="hero-subtitle italic">Design Ã— Code Ã— AI.</p>
          <p class="hero-description">
            åœ¨è®¾è®¡ä¸­è¿›è¡Œæ¢¯åº¦ä¸‹é™ï¼Œé€¼è¿‘ç†æƒ³ä¸ç°å®çš„å¹³è¡¡ã€‚<br>
            Descending through design â€” toward the equilibrium between ideal and real.
          </p>

          <div class="hero-buttons">
            <a href="#contact" class="btn-primary">Contact</a>
          </div>

          <!-- è½®æ’­æŒ‡ç¤ºå™¨ -->
          <div class="hero-slider-indicators  flex space-x-2 mt-4">
            <div class="indicator active"></div>
            <div class="indicator"></div>
            <div class="indicator"></div>
            <div class="indicator"></div>
            <div class="indicator"></div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- AI Section -->
  <section class="section" id="ai-section">
    <div class="section-wrapper p-6">
      <div class="section-grid">
        <!-- å·¦ä¾§æè¿° -->
        <div class="section-left">
          <div class="section-content">
            <h2 class="section-title">AI</h2>
            <p class="section-subtitle">
              ä»å™ªå£°å‡ºå‘ï¼Œèµ°å‘æ„è±¡ï¼›ä»æ¨¡å‹åˆ°å¿ƒè±¡ã€‚<br />
                From noise to notion â€” from model to imagination.
            </p>
            <div class="section-footer">
              <p class="section-description">
                åŸºäºPython, ComfyUIå¹³å°ï¼Œåœ¨è§†é¢‘ç”Ÿæˆä¸æ§åˆ¶ã€3Dç”Ÿæˆã€å›¾åƒç”Ÿæˆè¿›è¡Œç³»ç»Ÿæ€§æ¢ç´¢ã€‚<br />
                Based on the Python, ComfyUI platform, exploring video generation and control, 3D generation, and image generation.
              </p>
              <a href="#" class="section-view-all" id="viewAllAIBtn">View All â†’</a>
            </div>
          </div>
        </div>

        <!-- å³ä¾§å¡ç‰‡åŒºï¼ˆç”± JS æ¸²æŸ“ï¼‰ -->
        <div class="section-card">
          <div class="section-right" id="AIGrid"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- Code Section -->
  <section class="section" id="code-section">
    <div class="section-wrapper p-6">
      <div class="section-grid">
        <!-- å·¦ä¾§æè¿° -->
        <div class="section-left">
          <div class="section-content">
            <h2 class="section-title">Code</h2>
            <p class="section-subtitle">
              ä»ç®—æ³•å‡ºå‘ï¼Œæ„å»ºæ™ºèƒ½è®¾è®¡ï¼›ä»é€»è¾‘åˆ°ç©ºé—´ã€‚<br />
              From algorithms to intelligent design â€” from logic to space.
            </p>
            <div class="section-footer">
              <p class="section-description">
                åŸºäºPythonä¸å‰ç«¯æŠ€æœ¯ï¼Œåœ¨ç”Ÿæˆå¼è®¾è®¡ã€å‚æ•°åŒ–å»ºæ¨¡ä¸äº¤äº’ç³»ç»Ÿä¸­è¿›è¡Œå®è·µæ¢ç´¢ã€‚<br />
                Practicing generative design, parametric modeling, and interactive systems using Python and front-end technologies.
              </p>
              <a href="#" class="section-view-all" id="viewAllCodeBtn">View All â†’</a>
            </div>
          </div>
        </div>

        <!-- å³ä¾§å¡ç‰‡åŒºï¼ˆç”± JS æ¸²æŸ“ï¼‰ -->
        <div class="section-card">
          <div class="section-right" id="CodeGrid"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- Design Section -->
  <section class="section" id="design-section">
    <div class="section-wrapper p-6">
      <div class="section-grid">
        <!-- å·¦ä¾§æè¿° -->
        <div class="section-left">
          <div class="section-content">
            <h2 class="section-title">Design</h2>
            <p class="section-subtitle">
              ä»æ¦‚å¿µå‡ºå‘ï¼Œå¡‘é€ ç©ºé—´å™äº‹ï¼›ä»æ„ŸçŸ¥åˆ°å½¢å¼ã€‚<br />
              From concept to spatial narrative â€” from perception to form.
            </p>
            <div class="section-footer">
              <p class="section-description">
                èåˆè®¡ç®—æ€ç»´ä¸å»ºç­‘ç¾å­¦ï¼Œæ¢ç´¢ç”Ÿæˆå¼è®¾è®¡åœ¨å»ºç­‘ä¸åŸå¸‚å°ºåº¦ä¸­çš„è¡¨è¾¾ã€‚<br />
                Integrating computational thinking and architectural aesthetics to explore generative design at architectural and urban scales.
              </p>
              <a href="#" class="section-view-all" id="viewAllDesignBtn">View All â†’</a>
            </div>
          </div>
        </div>

        <!-- å³ä¾§å¡ç‰‡åŒºï¼ˆç”± JS æ¸²æŸ“ï¼‰ -->
        <div class="section-card">
          <div class="section-right" id="DesignGrid"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- Experience Section -->
  <section class="section" id="experience-section">
    <div class="section-wrapper p-6">
      <div class="section-grid">
        <!-- å·¦ä¾§æè¿° -->
        <div class="section-left">
          <div class="section-content">
            <h2 class="section-title">Experience</h2>
            <p class="section-subtitle">
              ä»å®è·µå‡ºå‘ï¼Œè¿æ¥ç ”ç©¶ä¸åˆ›é€ ï¼›ä»é¡¹ç›®åˆ°æ´è§ã€‚<br />
              From practice to insight â€” bridging research and creation through projects.
            </p>
            <div class="section-footer">
              <p class="section-description">
                èšç„¦AIé©±åŠ¨çš„å»ºç­‘è®¾è®¡åˆ›æ–°ã€‚<br />
                Focusing on AI-driven architectural innovation.
              </p>
              <a href="#" class="section-view-all" id="viewAllExperienceBtn">View All â†’</a>
            </div>
          </div>
        </div>

        <!-- å³ä¾§å¡ç‰‡åŒºï¼ˆç”± JS æ¸²æŸ“ï¼‰ -->
        <div class="section-card">
          <div class="section-right" id="ExperienceGrid"></div>
        </div>
      </div>
    </div>
  </section>


  <!-- About Me -->
  <section id="about" class="section">
    <div class="section-wrapper p-6">
      <div class="section-grid">
        <!-- å·¦ä¾§ï¼šAbout å†…å®¹ -->
        <div class="section-left">
          <div class="section-content">
            <h2 class="section-title">About Me</h2>

            <!-- ç²¾ç®€æ–‡æœ¬å†…å®¹ -->
            <div class="space-y-4 mb-6 text-slate-600 dark:text-slate-400">
              <p>2016â€“2019â€ƒä½›å±±å¸‚ç¬¬ä¸€ä¸­å­¦</p>
              <p>2019â€“2024â€ƒåå—ç†å·¥å¤§å­¦å»ºç­‘å­¦é™¢ Â· å»ºç­‘å­¦</p>
              <p>2024â€“Nowâ€ƒä¸œå—å¤§å­¦å»ºç­‘å­¦é™¢ Â· å»ºç­‘è¿ç®—ä¸åº”ç”¨å›¢é˜Ÿ</p>
              <p>æŠ€èƒ½ï¼šæ‘„å½± Â· è§†é¢‘åˆ¶ä½œ Â· Python Â· Grasshopper Â· 3Dç”Ÿæˆ</p>
            </div>

            <!-- æ ¸å¿ƒç»éªŒ/è£èª‰ -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
              <div>
                <h3 class="font-bold text-klein-blue dark:text-blue-400 mb-1">Honors</h3>
                <p class="text-sm">2023å¹¿ä¸œçœâ€œæŒ‘æˆ˜æ¯â€ä¸€ç­‰å¥–<br>ä¸œå—å¤§å­¦2025å­¦ä¸šå¥–å­¦é‡‘äºŒç­‰å¥–</p>
              </div>
              <div>
                <h3 class="font-bold text-green-600 dark:text-green-400 mb-1">Practice</h3>
                <p class="text-sm">2024.10â€“11 å›½é™…å·¥ä½œè¥<br>2023.09â€“11 è®¾è®¡å¸ˆåŠ©ç†<br>ç­é•¿ / å­¦åˆ›éƒ¨éƒ¨é•¿</p>
              </div>
              <div>
                <h3 class="font-bold text-purple-600 dark:text-purple-400 mb-1">Vision</h3>
                <p class="text-sm">è®¾è®¡æ˜¯ä¸€ç§è§£å†³é—®é¢˜çš„æ–¹å¼ã€‚ç”»å›¾ä¸ç¼–ç¨‹ï¼Œè®©æ„Ÿæ€§ä¸ç†æ€§å¹¶è¡Œã€‚</p>
              </div>
            </div>

            <!-- Reflections -->
            <div class="space-y-3 mb-6">
              <h3 class="section-subtitle">å¿ƒä¸­çš„è™ä¸˜ï½œReflections</h3>
              <p class="section-description about">
                åœ¨ç¡•å£«ç¬¬äºŒå¹´å›æœ›ï¼Œæˆ‘é€æ¸ç†è§£äº†â€œå»ºç­‘â€çš„å¤æ‚æ€§ã€‚<strong>å®ƒä¸æ˜¯å•ä¸€çš„é€ å‹è‰ºæœ¯ï¼Œè€Œæ˜¯ä¸€ç§è§£å†³é—®é¢˜çš„æ–¹å¼</strong>ã€‚æˆ‘å­¦ä¼šäº†ç»“æ„åŒ–åœ°æ‹†è§£ä»»åŠ¡ï¼Œä¹Ÿå­¦ä¼šä»äººçš„æ„Ÿå—å‡ºå‘å»è®¾è®¡ã€‚
              </p>
              <p class="section-description about">
                è®¾è®¡æœ‰æ— æ•°æ¡è·¯å¾„ï¼Œå…³é”®åœ¨äºå¦‚ä½•æ‰¾åˆ°é€‚åˆå½“ä¸‹è¯­å¢ƒçš„é‚£ä¸€æ¡ã€‚ç”»å›¾ä¸ç¼–ç¨‹ï¼Œæˆäº†æˆ‘æ„Ÿæ€§ä¸ç†æ€§çš„ä¸¤æ¡ç¥ç»ã€‚å®ƒä»¬è®©â€œè®¾è®¡â€ä¸åªæ˜¯è¡¨è¾¾å½¢å¼ï¼Œæ›´æ˜¯ä¸€ç§é€»è¾‘ä¸Šçš„æ¨ç†ä¸æ€è¾¨ã€‚
              </p>
            </div>

            <!-- Vision -->
            <div class="space-y-3 mb-6">
              <h3 class="section-subtitle">å¯¹æœªæ¥çš„ç•…æƒ³ï½œVision</h3>
              <p class="section-description about">
                å»ºç­‘æ˜¯ä¸€é—¨è‰ºæœ¯ï¼Œ<strong>ç¼–ç¨‹è®©è¿™ç§è‰ºæœ¯çš„ä½“éªŒå˜å¾—å¯è¢«æ›´å¤šäººå…±äº«</strong>ã€‚æˆ‘ç›¸ä¿¡ï¼Œç®—æ³•ä¸è¯¥æ›¿ä»£è®¾è®¡ï¼Œè€Œåº”æ‹“å±•è®¾è®¡çš„è¾¹ç•Œã€‚å»ºç­‘å¸ˆçš„æƒ³è±¡åŠ›ï¼Œåº”è¯¥åœ¨é€»è¾‘ä¸­è¢«æ”¾å¤§ï¼Œè€Œä¸æ˜¯è¢«çº¦æŸã€‚
              </p>
            </div>

            <!-- Flow -->
            <div class="space-y-3 mb-6">
              <h3 class="section-subtitle">åšè‡ªå·±çƒ­çˆ±çš„äº‹ï½œFlow</h3>
              <p class="section-description about">
                æœºå™¨å­¦ä¹ æœ‰ä¸ªæ ¸å¿ƒï¼šé€šè¿‡æ¢¯åº¦ä¸‹é™æœ€å°åŒ–æŸå¤±å‡½æ•°ã€‚ç”Ÿæ´»ä¹Ÿæ˜¯å¦‚æ­¤â€”â€”æˆ‘ä»¬åœ¨ä¸æ–­è°ƒæ•´æ–¹å‘ï¼Œè¯•å›¾â€œå‡å°‘åå·®â€ã€‚ä½†ç°å®ä¸­ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¹¶ä¸çŸ¥é“â€œæŸå¤±å‡½æ•°â€æ˜¯ä»€ä¹ˆã€‚
              </p>
              <p class="section-description about">
                Flow Model çš„æ€æƒ³è®©æˆ‘é‡æ–°ç†è§£äº†ç›®æ ‡ä¸è·¯å¾„çš„å…³ç³»ï¼š<strong>ä¸å…¶ç›¯ç€ç»ˆç‚¹ï¼Œä¸å¦‚é¡ºç€åŠ¨åŠ›å‰è¡Œ</strong>ã€‚æ–¹å‘æ˜ç¡®ï¼Œæ¯”ç›®æ ‡æ›´é‡è¦ã€‚åœ¨å¤æ‚çš„ä¸–ç•Œé‡Œï¼Œæ²¡æœ‰æœ€ä¼˜è§£ã€‚æ²¿ç€è‡ªå·±çƒ­çˆ±çš„æ–¹å‘èµ°ä¸‹å»â€”â€”è®©å™ªå£°é€æ¸å˜æˆç§©åºï¼Œè®©ä¸ç¡®å®šå˜æˆå½¢çŠ¶ã€‚
              </p>
            </div>

          </div>
        </div>

        <!-- å³ä¾§ï¼šä¸ªäººç…§ç‰‡èƒŒæ™¯å›¾ -->
        <div class="section-card-image">
          <div class="about-image-wrapper rounded-2xl overflow-hidden relative">
            <!-- èƒŒæ™¯å›¾ -->
            <img
              src="assets/images/background/about.webp"
              alt="Marco Hao"
              class="w-full h-full object-cover"
            />
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Contact -->
  <section id="contact" class="section contact py-20">
    <div class="max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h2 class="h2-middle section-title">Get in Touch</h2>
      <p class="text-slate-600 dark:text-slate-400 mt-4 mb-8">
        Hi there! Got something to say?
      </p>

      <div class="flex flex-wrap justify-center items-center gap-6 text-sm">
        <!-- GitHub -->
        <a
          href="https://github.com/MarcoHao"
          target="_blank"
          rel="noopener"
          class="flex items-center space-x-2 text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white transition-colors"
        >
          <i class="fab fa-github text-lg"></i>
          <span>GitHub</span>
        </a>

        <!-- Email with tooltip -->
        <div class="relative group">
          <a
            href="mailto:2325169215@qq.com"
            class="flex items-center space-x-2 text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white transition-colors"
          >
            <i class="fas fa-envelope text-lg"></i>
            <span>Email</span>
          </a>
          <div
            class="absolute bottom-full mb-2 left-1/2 transform -translate-x-1/2 px-3 py-1.5
                    bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-200
                    rounded text-xs shadow-md
                    invisible opacity-0
                    group-hover:visible group-hover:opacity-100
                    transition-opacity duration-200
                    z-50 whitespace-nowrap"
          >
            2325169215@qq.com
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Modal -->
  <div id="modalOverlay">
    <div class="modal">

      <!-- æµ®åŠ¨å…³é—­æŒ‰é’® -->
      <span id="closeModal" class="modal-close">&times;</span>

      <!-- ç®€æ˜“æ¨¡å¼ï¼šå·¦å³å¸ƒå±€ -->
      <div id="modalSimpleView" class="modal-simple-view">
        <div class="modal-content">
          <div class="modal-info">
            <span id="modalTag" class="modal-tag"></span>
            <h2 id="modalTitle"></h2>
            <p id="modalMeta" class="modal-meta"></p>
            <div class="modal-description"></div>
            <button id="readMoreBtn" class="read-more-btn">Read More</button>
            <!-- ç®€æ˜“æ¨¡å¼ä¸‹çš„ Read Less æŒ‰é’®ï¼ˆé»˜è®¤éšè—ï¼‰ -->
            <button id="readLessBtnSimple" class="read-less-btn hidden">Read Less</button>
          </div>
        </div>
        <div class="image-gallery-container">
          <div class="modal-image-container">
            <!-- å›¾ç‰‡ç”»å»Šå°†åœ¨è¿™é‡Œæ¸²æŸ“ -->
          </div>
        </div>
      </div>

      <!-- ReadMore æ¨¡å¼ï¼šå…¨ Markdown å†…å®¹ -->
      <div id="modalReadMoreView" class="modal-readmore-view hidden">
        <!-- æ»šåŠ¨åå‡ºç°çš„ Nav-->
        <div class="modal-scroll-nav flex items-center gap-3">
<!--          <div class="modal-header-inner">-->
<!--            <div class="modal-info">-->
<!--              <span id="modalTag3" class="modal-tag"></span>-->
<!--              <h2 id="modalTitle3"></h2>-->
<!--              <p id="modalMeta3" class="modal-meta"></p>-->
<!--            </div>-->
<!--            &lt;!&ndash; ğŸ‘‡ æ¢å¤ Read Less æŒ‰é’® &ndash;&gt;-->
<!--            <button id="readLessBtnNav" class="read-less-btn">Read Less</button>-->
<!--          </div>-->
          <button id="readLessBtnNav" class="read-less-btn">Read Less</button>
          <div class="mode-toggle modal-mode-toggle">
            <svg class="mode-icon" viewBox="0 0 24 24" ></svg>
          </div>
        </div>
        <!-- Hero å›¾ + ç£¨ç ‚æè¿° -->
        <div class="modal-hero">
          <img id="modalHeroImage" src="" alt="" />
          <div class="modal-hero-overlay">
            <div class="modal-hero-content markdown-body">
              <!-- è¿™é‡Œå°†æ¸²æŸ“å®Œæ•´çš„æ ‡é¢˜ã€å…ƒä¿¡æ¯ã€æè¿°ã€Read Less æŒ‰é’® -->
              <div class="hero-header">
                <span id="modalTag2" class="modal-tag"></span>
                <h2 id="modalTitle2"></h2>
                <p id="modalMeta2" class="modal-meta"></p>
              </div>
              <div id="heroDescription"></div>
              <button id="readLessBtnHero" class="read-less-btn">Read Less</button>
            </div>
          </div>
        </div>
        <!-- å®Œæ•´ Markdown å†…å®¹ -->
        <div class="modal-markdown-wrapper">
          <div class="modal-markdown-body markdown-body"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // === æ•°æ®å®šä¹‰ ===
    const AIData = [
      {
        id: '3d-model-generation-workflow',
        title: "3D Model Generation Workflow",
        tag: "AI",
        meta: "Hunyuan3D Ã— ComfyUI",
        image: "assets/projects/3d-multiview-generation/Cover.jpg",
        description: `
          <p>åŸºäºHunyuan3Dä¸ComfyUIæ¡†æ¶ï¼Œå®ç°ä» text2image åˆ° image2model çš„å…¨è¿‡ç¨‹ã€‚é¡¹ç›®èšç„¦äºå¤šè§†å›¾ä¸€è‡´æ€§ä¸å¯æ§æ€§çš„æ ¸å¿ƒé—®é¢˜ï¼Œé€šè¿‡LoRA å¾®è°ƒä¸ControlNet å§¿æ€æ§åˆ¶ï¼Œå®ç°äº†ç¨³å®šå¤šè§†è§’ 3D ç”Ÿæˆæµç¨‹ã€‚</p>
        `,
        markdown: "assets/projects/3d-multiview-generation/3d-multiview-generation.md",
        links: [
          { text: "Project Video", url: "#" },
          { text: "Technical Report", url: "#" }
        ]
      },
      {
        id: 'wan-video-generation',
        title: "WAN 2.2 è§†é¢‘ç”Ÿæˆå·¥ä½œæµ",
        tag: "AI",
        meta: "2024 Â· SEU Ã— Kuaishou AI Lab",
        image: "assets/projects/wan-video-generation/WanVideoWrapper_Fun22ControlCamera_00011.png",
        description: `
          <p>åŸºäº ComfyUI æ„å»ºçš„ä¸¤é˜¶æ®µè§†é¢‘ç”Ÿæˆç­–ç•¥ï¼šä»¥ FunControl å®ç°åŠ¨ä½œä¸åœºæ™¯æ§åˆ¶ï¼Œå†é€šè¿‡ ReCamMaster + WAN Video Wrapper è¿›è¡Œé•œå¤´é‡å»ºä¸å¤šè§†è§’é‡é‡‡æ ·ï¼Œå®ç°å…¼å…·è¯­ä¹‰ä¸€è‡´æ€§ä¸é•œå¤´å¤šæ ·æ€§çš„ç”Ÿæˆå¼è§†é¢‘å·¥ä½œæµã€‚</p>
        `,
        markdown: "assets/projects/wan-video-generation/wan-video-generation.md",
        links: [
          { text: "GitHub Â· WAN Video Wrapper", url: "https://github.com/kijai/ComfyUI-WanVideoWrapper" },
          { text: "GitHub Â· ReCamMaster", url: "https://github.com/KwaiVGI/ReCamMaster" }
        ]
      },
      // {
      //   id: 'ai-video-generation',
      //   title: "AI Video Generation",
      //   tag: "AI",
      //   image: "https://placehold.co/800x600/1e293b/f1f5f9?text=Video",
      //   markdown: "assets/projects/ai-video-generation/content.md"
      // }
    ];

    const CodeData = [
      {
        id: 'morphusion-workshop',
        title: "Morphusion: Composite Sprawling",
        tag: "Workshop",
        meta: "Grasshopper Ã— Python Ã— Robotic Fabrication",
        image: "assets/projects/morfusion-project/cover.jpg",
        description: `
          <p>ä½œä¸ºä¸œå—å¤§å­¦ä¸ETH Zurichåˆä½œå››åå‘¨å¹´çš„çºªå¿µé¡¹ç›®ï¼Œâ€œMorphusionâ€èåˆAIGCç”Ÿæˆã€å‚æ•°åŒ–å»ºæ¨¡ä¸é«˜ç²¾åº¦æ•°å­—å»ºé€ ï¼Œé€šè¿‡å†…ä¾§åç§»æ§åˆ¶ã€æŠ˜ç—•è¯†åˆ«ä¸ARè¾…åŠ©è£…é…ï¼Œå®ç°äº†å¤æ‚æœ‰æœºå½¢æ€ä»ç®—æ³•åˆ°å®ä½“çš„ç²¾å‡†è½åœ°ã€‚</p>
        `,
        markdown: "assets/projects/morfusion-project/Morphusion.md",
        links: [
          { text: "Workshop Documentation", url: "#" },
          { text: "Construction Video", url: "#" }
        ]
      },
      {
        id: 'multi-agent-structural-generation',
        title: "Multi-Agent Structural Generation",
        tag: "Paper",
        meta: "Python Ã— Grasshopper Ã— MAS",
        image: "assets/projects/multi-agent-system/cover.jpg",
        description: `
          <p>æœ¬ç ”ç©¶æå‡ºä¸€ç§åŸºäºåˆ†å±‚è¡Œä¸ºæ§åˆ¶çš„å¤šæ™ºèƒ½ä½“ç³»ç»Ÿæ¡†æ¶ï¼Œç”¨äºååŒä¼˜åŒ–å»ºç­‘ç»“æ„çš„æ€§èƒ½ã€å¯è£…é…æ€§ä¸å‡ ä½•é€»è¾‘ã€‚é€šè¿‡â€œæ¶æ„â€”æœºåˆ¶â€”ç­–ç•¥â€”è¡Œä¸ºâ€å››å±‚è®¾è®¡ï¼Œå®ç°ä»å…¨å±€è°ƒåº¦åˆ°å±€éƒ¨å»ºæ„çš„ç»Ÿä¸€ç”Ÿæˆæµç¨‹ï¼Œå¹¶åœ¨è‡ªç”±æ›²é¢é’¢æ¡†æ¶æ¡ˆä¾‹ä¸­éªŒè¯å…¶æœ‰æ•ˆæ€§ã€‚</p>
        `,
        markdown: "assets/projects/multi-agent-system/multi-agents-system.md",
        links: [
          { text: "Full Paper", url: "#" },
          { text: "Source Code", url: "#" }
        ]
      },
      {
        id: 'city-evolution-florence',
        title: "City Evolution: Florence Urban Design",
        tag: "Architecture",
        meta: "Multi-Agent Ã— Space Syntax Ã— Grasshopper",
        image: "assets/projects/city-evolution/image.png",
        description: `
          <p>æœ¬é¡¹ç›®åœ¨ä½›ç½—ä¼¦è¨å†å²åŸåŒºå¼€å±•åŸå¸‚è‡ªæ›´æ–°æ¨¡æ‹Ÿï¼Œé€šè¿‡è¡Œäººæ™ºèƒ½ä½“ä¸ç¯å¢ƒæ™ºèƒ½ä½“çš„äº’åŠ¨ï¼Œç»“åˆç©ºé—´å¥æ³•ä¸å¤šæŒ‡æ ‡å»ºç­‘èšç±»ï¼Œæ¢ç´¢æ­¥è¡Œç©ºé—´æ´»åŠ›çš„åŠ¨æ€æ¼”åŒ–æœºåˆ¶ï¼Œä¸ºå†å²åŸå¸‚æä¾›æ•°æ®é©±åŠ¨çš„æ¸è¿›å¼æ›´æ–°è·¯å¾„ã€‚</p>
        `,
        markdown: "assets/projects/city-evolution/ä½›ç½—ä¼¦è¨åŸå¸‚è®¾è®¡.md",
        links: [
          { text: "Simulation Code", url: "#" },
          { text: "Process Documentation", url: "#" }
        ]
      },
      {
        id: 'urban-leftover-spaces',
        title: "Urban Leftover Spaces Analysis",
        tag: "Paper",
        meta: "Grasshopper Ã— Urban Regeneration",
        image: "assets/projects/micro-space-analysis/cover.jpg",
        description: `
          <p>æœ¬ç ”ç©¶åŸºäº Rhino + Grasshopper æ„å»ºå‚æ•°åŒ–æ¨¡å‹ï¼Œä»äººæµæ½œåŠ›ã€çƒ­èˆ’é€‚åº¦ä¸ç©ºé—´ç±»å‹ä¸‰æ–¹é¢è¯†åˆ«åŸå¸‚å‰©ä½™ç©ºé—´ï¼Œå¹¶ä»¥å¹¿å·å¤§å°é©¬ç«™è¡—åŒºä¸ºä¾‹ï¼Œæå‡ºæ•°æ®é©±åŠ¨çš„å¾®æ›´æ–°è®¾è®¡è·¯å¾„ï¼Œæ”¯æŒé«˜å¯†åº¦åŸå¸‚ä¸­çš„ç²¾ç»†åŒ–ç©ºé—´æ²»ç†ã€‚</p>
        `,
        markdown: "assets/projects/micro-space-analysis/åŸå¸‚å¾®ç©ºé—´åˆ†æ.md",
        links: [
          { text: "Full Paper", url: "#" },
          { text: "Grasshopper Definition", url: "#" }
        ]
      },
    ];

    const DesignData = [
      {
        id: 'center-ula-adaptive-design',
        title: "Center ULA: Adaptive Heritage Design",
        tag: "Programming",
        meta: "Generative Design Ã— A* Algorithm Ã— Spatial Analysis",
        image: "assets/projects/center-ula/image.png",
        description: `
          <p>æœ¬æ¯•ä¸šè®¾è®¡æå‡ºâ€œæ—¢è¦åˆè¦â€ç†å¿µï¼Œé€šè¿‡æ½œç©ºé—´è¯„ä»·ä½“ç³»ä¸ç”Ÿæˆå¼è·¯å¾„ç®—æ³•ï¼Œåœ¨æ—§å»ºç­‘æ”¹é€ ä¸­åŒæ­¥å®ç°ç©ºé—´æ•ˆç‡æœ€å¤§åŒ–ä¸é—äº§å¹²é¢„æœ€å°åŒ–ï¼Œä¸ºåŸå¸‚å­˜é‡æ›´æ–°æä¾›é«˜æ•ˆä¸”äººæ–‡çš„è®¾è®¡è·¯å¾„ã€‚</p>
        `,
        markdown: "assets/projects/center-ula/äººå·¥æ™ºèƒ½æ—¶ä»£ä¸‹çš„å»ºç­‘è®¾è®¡.md",
        links: [
          { text: "Full Thesis", url: "#" },
          { text: "Grasshopper Definition", url: "#" }
        ]
      },
      {
        id: 'wood-grain-study',
        title: "Wood Grain Study",
        tag: "Programming",
        meta: "Grasshopper Ã— Kangaroo",
        image: "assets/projects/wood-grain-analysis/cover.png",
        description: `
          <p>æœ¬ç ”ç©¶æºäºå¯¹ã€Šæ¢æ€æˆå…¨é›†ã€‹ä¸­æœ¨æ„ä»¶å‰–é¢å›¾çš„è§‚å¯Ÿï¼Œèšç„¦äºæœ¨ææˆªé¢çº¹ç†ç»˜åˆ¶çš„ç§‘å­¦æ€§ä¸ç»“æ„æ€§ã€‚é€šè¿‡ Grasshopper ä¸ Kangaroo æ„å»ºå‚æ•°åŒ–åŠ›å­¦æ¨¡å‹ï¼Œæ¢ç´¢â€œåˆç†ç”»çº¹â€èƒŒåçš„ææ–™é€»è¾‘ï¼Œå¹¶å°è¯•ä¸ºå¤å»ºç­‘ä¿®ç¼®ä¸­çš„æœ¨æé€‰å‹æä¾›è®¾è®¡ä¾æ®ã€‚</p>
        `,
        markdown: "assets/projects/wood-grain-analysis/wood-grain-analysis.md",
        links: [
          { text: "Project Report", url: "#" },
          { text: "Grasshopper Definition", url: "#" }
        ]
      },
      {
        id: 'wind-valley-theatre',
        title: "Wind Valley Theatre",
        tag: "Architecture",
        meta: "Grasshopper Ã— Kangaroo Ã— VisualARQ",
        image: "assets/projects/theater-design/Cover.png",
        description: `
          <p>æœ¬è®¾è®¡åæ€â€œæˆå‰§æ€§ç©ºé—´â€çš„å¸¸è§è¯¯åŒºï¼Œä»è§‚ä¼—çš„è§†çº¿è¡Œä¸ºä¸æƒ…æ„Ÿå“åº”å‡ºå‘ï¼Œæ„å»ºåŸºäºè§†è§‰èŠ‚å¥çš„ç©ºé—´ç”Ÿæˆé€»è¾‘ã€‚é€šè¿‡å‚æ•°åŒ–å»ºæ¨¡ä¸å¤šç›®æ ‡ä¼˜åŒ–ï¼Œåœ¨ç®—æ³•ç†æ€§ä¸è®¾è®¡æ„Ÿæ€§ä¹‹é—´å¯»æ±‚å¹³è¡¡ï¼Œå¹¶ä»¥è‡ªæ‰¿é‡è†œç»“æ„å®ç°è½»ç›ˆè€Œå¯Œæœ‰å¼ åŠ›çš„å‰§åœºå½¢æ€ã€‚</p>
        `,
        markdown: "assets/projects/theater-design/theater-design.md",
        links: [
          { text: "Design Process", url: "#" },
          { text: "Grasshopper File", url: "#" }
        ]
      },
    ];

    const ExperienceData = [
    {
      year: "2025",
      items: [
        {
          id: "exp2025-01",
          title: "åŸºäºåˆ†å±‚è¡Œä¸ºæ§åˆ¶çš„å¤šæ™ºèƒ½ä½“ç³»ç»Ÿç”Ÿæˆä¸ä¼˜åŒ–æ–¹æ³•ç ”ç©¶",
          subtitle: "2025è®¡ç®—æ€§è®¾è®¡å­¦æœ¯è®ºå›æš¨ä¸­å›½å»ºç­‘å­¦ä¼šè®¡ç®—æ€§è®¾è®¡ä¸“ä¸šå§”å‘˜ä¼šå¹´ä¼š",
          tag: "Paper",
          date: "2025-10",
          markdown: "assets/experience/multi-agent-mas-research/content.md",
          image: "assets/experience/è¿æ¥æ™ºèƒ½ä½“.jpg"
        },
        {
          id: "exp2025-02",
          title: "åŸºäºæœºå™¨å­¦ä¹ çš„åŸå¸‚è¡—åŒºèƒ½è€—åˆ†æä¸é¢„æµ‹",
          subtitle: "XGBoost + SHAP",
          tag: "AI",
          date: "2025-03",
          markdown: "assets/experience/urban-energy-prediction/content.md",
          image: "assets/experience/å­¦ä¹ æ•ˆæœåˆ†æ_5.png"
        },
        {
          id: "exp2025-03",
          title: "å®œå…´å¸‚ä¸èœ€é•‡ç«‹é¢æ›´æ–°æ”¹é€ ä¸åŸå¸‚è®¾è®¡",
          subtitle: "åŸå¸‚æ›´æ–°å®è·µé¡¹ç›®",
          tag: "Architecture",
          date: "2025-06",
          markdown: "assets/experience/dingshu-facade-renewal/content.md",
          image: "assets/experience/AIæ•ˆæœå›¾.png"
        },
        {
          id: "exp2025-04",
          title: "ä¸œå—å¤§å­¦äºŒç­‰å­¦ä¸šå¥–å­¦é‡‘",
          subtitle: "ä¸œå—å¤§å­¦",
          tag: "Award",
          date: "2025-10",
          markdown: "assets/experience/seu-scholarship-2025/content.md",
          image: "https://placehold.co/800x600/1e293b/f1f5f9?text=Scholarship"
        }
      ]
    },
    {
      year: "2024",
      items: [
        {
          id: "exp2024-01",
          title: "Decoding syntax:åŸå¸‚ç”Ÿæˆè®¾è®¡ç½‘ç»œå·¥ä½œè¥",
          subtitle: "åŒæµå¤§å­¦",
          tag: "Workshop",
          date: "2024-11",
          markdown: "assets/experience/digital-futures-tongji/content.md",
          image: "https://placehold.co/800x600/1e293b/f1f5f9?text=Digital+Futures"
        },
        {
          id: "exp2024-02",
          title: "â€œå½¢æ€èåˆï¼šå¤åˆè”“ç”Ÿâ€å›½é™…å·¥ä½œè¥",
          subtitle: "ä¸œå—å¤§å­¦ Ã— è‹é»ä¸–è”é‚¦ç†å·¥å­¦é™¢",
          tag: "Workshop",
          date: "2024-11",
          markdown: "assets/experience/morphusion-workshop/content.md",
          image: "assets/projects/morfusion-project/cover.jpg"
        },
        {
          id: "exp2024-03",
          title: "é™¢çº§ä¼˜ç§€æ¯•ä¸šè®¾è®¡",
          subtitle: "åå—ç†å·¥å¤§å­¦",
          tag: "Award",
          date: "2024-06",
          markdown: "assets/experience/outstanding-thesis-scutech/content.md",
          image: "assets/experience/ä¼˜ç§€æ¯•è®¾.jpg"
        },
        {
          id: "exp2024-04",
          title: "2024 æœªæ¥Â·å±• çœä¼˜ç§€æ¯•è®¾å‚å±•ä½œå“",
          // subtitle: "å¹¿ä¸œçœæ•™è‚²å…",
          tag: "Architecture",
          date: "2024-11",
          markdown: "assets/experience/provincial-grad-exhibition/content.md",
          image: "assets/experience/æœªæ¥å±•.jpg"
        },
        {
          id: "exp2024-05",
          title: "ä¸œå—å¤§å­¦äºŒç­‰å­¦ä¸šå¥–å­¦é‡‘",
          subtitle: "ä¸œå—å¤§å­¦",
          tag: "Award",
          date: "2024-10",
          markdown: "assets/experience/seu-scholarship-2024/content.md",
          image: "https://placehold.co/800x600/1e293b/f1f5f9?text=Scholarship"
        },
        {
          id: "exp2024-06",
          title: "å…è¯•æ”»è¯»å»ºç­‘å­¦ä¸“ä¸šç¡•å£«å­¦ä½",
          subtitle: "ä¸œå—å¤§å­¦å»ºç­‘å­¦é™¢",
          tag: "Education",
          date: "2024-09",
          markdown: "assets/experience/seu-masters-admission/content.md",
          image: "https://placehold.co/800x600/1e293b/f1f5f9?text=SEU+Masters"
        },
        {
          id: "exp2024-07",
          title: "å»ºç­‘å­¦å­¦å£«å­¦ä½",
          subtitle: "åå—ç†å·¥å¤§å­¦",
          tag: "Education",
          date: "2024-06",
          markdown: "assets/experience/bachelor-degree-scutech/content.md",
          image: "assets/experience/æ¯•ä¸š.jpg"
        }
      ]
    },
    {
      year: "2023",
      items: [
        {
          id: "exp2023-01",
          title: "â€œæŒ‘æˆ˜æ¯â€å¹¿ä¸œå¤§å­¦ç”Ÿè¯¾å¤–å­¦æœ¯ç§‘æŠ€ä½œå“ç«èµ›ç‰¹ç­‰å¥–",
          subtitle: "å…±é’å›¢å¹¿ä¸œçœå§”ç­‰",
          tag: "Award",
          date: "2023-06",
          markdown: "assets/experience/challenge-cup-guangdong-special/content.md",
          image: "assets/experience/é«˜å¯†åº¦å»ºæˆç¯å¢ƒä¸‹å¥åº·é£é™©ç©ºé—´è¯†åˆ«ä¸ä¼˜åŒ–ç­–ç•¥â€”â€”ä»¥å¹¿å·ä¸­å¿ƒåŸåŒºä¸ºä¾‹.jpg"
        },
        {
          id: "exp2023-02",
          title: "åå—ç†å·¥å¤§å­¦â€œæŒ‘æˆ˜æ¯â€ç»ˆå®¡å†³èµ›ä¸€ç­‰å¥–",
          subtitle: "åå—ç†å·¥å¤§å­¦",
          tag: "Award",
          date: "2023-03",
          markdown: "assets/experience/challenge-cup-scutech-first/content.md",
          image: "assets/experience/æŒ‘æˆ˜æ¯æ ¡çº§ä¸€ç­‰å¥–.jpg"
        },
        {
          id: "exp2023-03",
          title: "å‘æ˜ä¸“åˆ©ï¼šåŸå¸‚ç©ºé—´å»ºç­‘å½¢ä½“ä¼˜åŒ–æ–¹æ³•ã€ç³»ç»Ÿã€è®¡ç®—æœºè®¾å¤‡åŠå­˜å‚¨ä»‹è´¨",
          subtitle: "å›½å®¶çŸ¥è¯†äº§æƒå±€ CN116257925A",
          tag: "Patent",
          date: "2023-03",
          markdown: "assets/experience/patent-urban-form-optimization/content.md",
          image: "assets/experience/åŸå¸‚ç©ºé—´å»ºç­‘å½¢ä½“ä¼˜åŒ–æ–¹æ³•ã€ç³»ç»Ÿã€è®¡ç®—æœºè®¾å¤‡åŠå­˜å‚¨ä»‹è´¨.jpg"
        },
        {
          id: "exp2023-04",
          title: "å‘æ˜ä¸“åˆ©ï¼šæ½œåŠ›å¾®ç©ºé—´è¯†åˆ«è¯„ä¼°ä¸è¥å»ºæ–¹æ³•ã€ç³»ç»Ÿã€è®¾å¤‡åŠå­˜å‚¨ä»‹è´¨",
          subtitle: "å›½å®¶çŸ¥è¯†äº§æƒå±€ CN117390478A",
          tag: "Patent",
          date: "2023-09",
          markdown: "assets/experience/patent-microspace-method/content.md",
          image: "assets/experience/æ½œåŠ›å¾®ç©ºé—´è¯†åˆ«è¯„ä¼°ä¸è¥å»ºæ–¹æ³•ã€ç³»ç»Ÿã€è®¾å¤‡åŠå­˜å‚¨ä»‹è´¨.jpg"
        },
      ]
    },
    {
      year: "2022",
      items: [
        {
          id: "exp2022-01",
          title: "é™¢çº§ä¼˜ç§€éƒ¨é•¿",
          subtitle: "åå—ç†å·¥å¤§å­¦å»ºç­‘å­¦é™¢",
          tag: "Award",
          date: "2022-04",
          markdown: "assets/experience/outstanding-minister-scutech/content.md",
          image: "assets/experience/é™¢çº§ä¼˜ç§€éƒ¨é•¿.jpg"
        },
        {
          id: "exp2022-02",
          title: "SRPé¡¹ç›®ï¼šæœºå™¨å­¦ä¹ ä¸è®¾è®¡å‰æ²¿æ¢ç´¢",
          subtitle: "åå—ç†å·¥å¤§å­¦",
          tag: "AI",
          date: "2022-05",
          markdown: "assets/experience/srp-ml-design/content.md",
          image: "assets/experience/SRP.png"
        }
      ]
    },
    {
      year: "2021",
      items: [
        {
          id: "exp2021-09",
          title: "ä¼˜ç§€å­¦ç”Ÿä¼šéª¨å¹²",
          subtitle: "åå—ç†å·¥å¤§å­¦",
          tag: "Award",
          date: "2021-09",
          markdown: "assets/experience/outstanding-student-union/content.md",
          image: "assets/experience/ä¼˜ç§€å­¦ç”Ÿä¼šéª¨å¹².jpg"
        },
        {
          id: "exp2021-12",
          title: "2021 ç²¤æ¸¯æ¾³å¤§æ¹¾åŒºÂ·ä¸œç›Ÿå›½é™…é«˜æ ¡è¥é€ å¤§èµ›",
          subtitle: "åå—ç†å·¥å¤§å­¦å­¦ç”Ÿä¼š",
          tag: "Event",
          date: "2021-12",
          markdown: "assets/experience/gba-asean-competition-org/content.md",
          image: "assets/experience/ç²¤æ¸¯æ¾³å¤§æ¹¾åŒºÂ·ä¸œç›Ÿå›½é™…é«˜æ ¡è¥é€ å¤§èµ›.jpg"
        }
      ]
    },
    {
      year: "2020",
      items: [
        {
          id: "exp2020-01",
          title: "å¥¥æ„å»ºç­‘å¥–",
          subtitle: "å¥¥æ„å»ºç­‘å·¥ç¨‹è®¾è®¡æœ‰é™å…¬å¸",
          tag: "Award",
          date: "2020-12",
          markdown: "assets/experience/aoyi-architecture-award/content.md",
          image: "assets/experience/å¥¥æ„å»ºç­‘å¥–.PNG"
        }
      ]
    }
  ];

    // === æ¸²æŸ“é¡¹ç›®å¡ç‰‡ ===
    // helper: æŠŠæ ‡ç­¾è½¬æˆå®‰å…¨çš„ class å (e.g. "Digital Fabrication" -> "digital-fabrication")
    function slugifyTag(tag) {
      return String(tag || '')
        .trim()
        .toLowerCase()
        .replace(/\s+/g, '-')        // spaces -> -
        .replace(/[^\w\-]/g, '')     // remove non-word (keeps a-z0-9_ -)
        .replace(/\-+/g, '-');       // collapse multiple -
    }

    // é€šç”¨æ¸²æŸ“å‡½æ•°ï¼šæ¥æ”¶å®¹å™¨å…ƒç´  id å’Œæ•°æ®æ•°ç»„
    function renderCards(containerId, dataArray) {
      const container = document.getElementById(containerId);
      if (!container) return;
      container.innerHTML = ''; // æ¸…ç©ºæ—§å†…å®¹

      dataArray.forEach(item => {
        const card = document.createElement('div');
        card.className = 'card';

        const tagClass = `tag-${slugifyTag(item.tag || '')}`;

        // æ„å»º overlay å†…å®¹ï¼ˆæ‚¬åœæ—¶æ˜¾ç¤ºï¼‰
        const overlayContent = `
          <div class="card-tag ${tagClass}">${item.tag || ''}</div>
          <h3 class="card-title">${item.title || ''}</h3>
          ${item.meta ? `<p class="card-desc">${item.meta}</p>` : ''}
        `;

        // å›¾ç‰‡å®¹å™¨ï¼ˆå§‹ç»ˆæ˜¾ç¤ºï¼‰
        const imgHtml = item.image
          ? `<div class="card-image"><img src="${item.image}" alt="${(item.title || '').replace(/"/g, '&quot;')}"></div>`
          : '';

        // æ•´ä½“ç»“æ„ï¼šå›¾ç‰‡ + æ‚¬åœ overlay
        card.innerHTML = `
          ${imgHtml}
          <div class="card-overlay">
            ${overlayContent}
          </div>
        `;

        card.addEventListener('click', () => openModal(item));
        container.appendChild(card);
      });
    }

    renderCards('AIGrid', AIData);
    renderCards('CodeGrid', CodeData);
    renderCards('DesignGrid', DesignData);

    // === æ¸²æŸ“ Experience å¡ç‰‡ ===
    const ExperienceGrid = document.getElementById('ExperienceGrid');
    ExperienceData.forEach(yearData => {
      const yearDiv = document.createElement('div');

      // å¹´ä»½æ ‡é¢˜
      const yearTitle = document.createElement('div');
      // yearTitle.className = "text-2xl font-bold text-klein-blue dark:text-blue-400 mb-4 select-none";
      yearTitle.className = "year-title";
      yearTitle.textContent = yearData.year;
      yearDiv.appendChild(yearTitle);

      // === å¯¹ items æŒ‰ date é™åºæ’åºï¼ˆæœ€æ–°åœ¨å‰ï¼‰===
      const sortedItems = [...yearData.items].sort((a, b) => {
        // è¾…åŠ©å‡½æ•°ï¼šå°† "YYYY" æˆ– "YYYY-MM" è½¬ä¸ºå¯æ¯”è¾ƒçš„æ—¶é—´æˆ³
        const parseDate = (dateStr) => {
          if (!dateStr) return 0;
          // è¡¥å…¨ä¸º YYYY-MM æ ¼å¼ï¼ˆè‹¥åªæœ‰å¹´ï¼Œåˆ™è§†ä¸º 12 æœˆï¼‰
          const padded = dateStr.length === 4 ? `${dateStr}-12` : dateStr;
          return new Date(padded).getTime();
        };
        return parseDate(b.date) - parseDate(a.date); // é™åºï¼šæœ€æ–°åœ¨å‰
      });

      // å¡ç‰‡åˆ—è¡¨
      const itemsDiv = document.createElement('div');
      itemsDiv.className = "p-2";

      sortedItems.forEach(item => {
        const card = document.createElement('div');
        card.className = 'card experience-card';

        const tagClass = `tag-${item.tag.toLowerCase()}`;

        card.innerHTML = `
        <div class="card-content flex items-center gap-3">
          <!-- å·¦ä¾§å›¾ç‰‡ -->
          <div class="experience-thumb">
            <img src="${item.image}" alt="" loading="lazy" />
          </div>
          <!-- åŸæœ‰æ–‡å­—å†…å®¹ -->
          <div class="flex-1 min-w-0">
            <div class="card-tag ${tagClass}">${item.tag}</div>
            <h3 class="font-bold text-slate-900 dark:text-white truncate">${item.title}</h3>
            <p class="text-slate-600 dark:text-slate-400 text-sm truncate">${item.subtitle}</p>
          </div>
          <!-- å³ä¾§æ—¥æœŸ -->
          <div class="text-sm text-slate-500 dark:text-slate-400 shrink-0 whitespace-nowrap">${item.date}</div>
        </div>
      `;

        card.addEventListener('click', (e) => {
          e.preventDefault();
          openModal(item);
        });

        itemsDiv.appendChild(card);
      });

      yearDiv.appendChild(itemsDiv);
      ExperienceGrid.appendChild(yearDiv);
    });

    /* ========== é€šç”¨ View All æ§åˆ¶å‡½æ•° ========== */
    function initViewAllToggle(sectionId, buttonId, innerId) {
      const section = document.getElementById(sectionId);
      const btn = document.getElementById(buttonId);
      const inner = document.getElementById(innerId);
      if (!section || !btn || !inner) return;

      let pageScrollY = 0;
      let innerScrollTop = 0;
      let isExpanded = false;

      btn.addEventListener('click', (e) => {
        e.preventDefault();

        if (!isExpanded) {
          // å±•å¼€å‰ï¼šä¿å­˜æ»šåŠ¨çŠ¶æ€
          pageScrollY = window.scrollY || window.pageYOffset;
          innerScrollTop = inner.scrollTop || 0;

          // é”å®š body æ»šåŠ¨
          document.body.style.overflow = 'hidden';

          // å±•å¼€å½“å‰ section
          section.classList.add('expanded');
          inner.scrollTop = 0;

          btn.textContent = 'Close â†';
          isExpanded = true;
        } else {
          // æ”¶èµ·
          section.classList.remove('expanded');

          // æ¢å¤ body æ»šåŠ¨
          document.body.style.overflow = '';
          setTimeout(() => {
            window.scrollTo({ top: pageScrollY, behavior: 'instant' });
          }, 0);
          inner.scrollTop = innerScrollTop || 0;

          btn.textContent = 'View All â†’';
          isExpanded = false;
        }
      });

      // Esc é”®é€€å‡º
      window.addEventListener('keydown', (e) => {
        if (isExpanded && e.key === 'Escape') {
          btn.click();
        }
      });
    }

    /* ========== åˆå§‹åŒ–å¤šä¸ª Section ========== */
    document.addEventListener('DOMContentLoaded', () => {
      initViewAllToggle('ai-section', 'viewAllAIBtn', 'AIGrid');
      initViewAllToggle('code-section', 'viewAllCodeBtn', 'CodeGrid');
      initViewAllToggle('design-section', 'viewAllDesignBtn', 'DesignGrid');
      initViewAllToggle('experience-section', 'viewAllExperienceBtn', 'ExperienceGrid');
    });

    // === å…ƒç´ å¼•ç”¨ ===
    const modalOverlay = document.getElementById('modalOverlay');
    const closeModalBtn = document.getElementById('closeModal');

    // ç®€æ˜“æ¨¡å¼
    const modalSimpleView = document.getElementById('modalSimpleView');
    const modalTitle = document.getElementById('modalTitle');
    const modalTag = document.getElementById('modalTag');
    const modalMeta = document.getElementById('modalMeta');
    const modalDescriptionEl = modalSimpleView.querySelector('.modal-description');
    const modalImageContainer = modalSimpleView.querySelector('.modal-image-container');
    const readMoreBtn = document.getElementById('readMoreBtn');
    const readLessBtnSimple = document.getElementById('readLessBtnSimple'); // ç®€æ˜“æ¨¡å¼ä¸­çš„ Read Less

    // ReadMore æ¨¡å¼
    const modalReadMoreView = document.getElementById('modalReadMoreView');
    const modalHeroImage = document.getElementById('modalHeroImage');
    const modalHeroContent = modalReadMoreView.querySelector('.modal-hero-content');
    const heroDescription = modalReadMoreView.querySelector('#heroDescription'); // Hero ä¸­çš„æè¿°
    const modalMarkdownBody = modalReadMoreView.querySelector('.modal-markdown-body');

    // Hero å†…éƒ¨çš„ Read Less æŒ‰é’®
    const readLessBtnHero = document.getElementById('readLessBtnHero');
    const readLessBtnNav = document.getElementById('readLessBtnNav');

    // Sticky Navï¼ˆä»…ç”¨äºæ˜¾ç¤ºæ ‡é¢˜/æ ‡ç­¾/å…ƒä¿¡æ¯ï¼‰
    const modalScrollNav = document.querySelector('.modal-scroll-nav');
    // const modalTitle3 = document.getElementById('modalTitle3');
    // const modalTag3 = document.getElementById('modalTag3');
    // const modalMeta3 = document.getElementById('modalMeta3');

    let currentData = null;

    /** å·¥å…·å‡½æ•° */
    function slugifyTag(tag) {
      return String(tag).trim().toLowerCase().replace(/\s+/g, '-').replace(/[^a-z0-9-_]/g, '');
    }

    function renderTags(tag, container) {
      if (!container) return;
      if (Array.isArray(tag) && tag.length > 0) {
        container.innerHTML = tag.map(t => {
          const cls = 'tag-' + slugifyTag(t);
          return `<span class="card-tag ${cls}">${t}</span>`;
        }).join('');
      } else if (typeof tag === 'string' && tag.trim()) {
        const cls = 'tag-' + slugifyTag(tag);
        container.innerHTML = `<span class="card-tag ${cls}">${tag}</span>`;
      } else {
        container.innerHTML = '';
      }
    }

    // function handleScrollNav(e) {
    //   const scrollTop = e.target.scrollTop;
    //   const heroEl = modalReadMoreView.querySelector('.modal-hero');
    //   const heroHeight = heroEl ? heroEl.offsetHeight : 400;
    //   modalScrollNav.classList.toggle('shown', scrollTop > heroHeight * 0.6);
    // }

    function switchToSimpleView() {
      modalReadMoreView.classList.add('hidden');
      modalSimpleView.classList.remove('hidden');
      modalScrollNav.classList.remove('shown');
      modalReadMoreView.scrollTop = 0;

      // æ›´æ–°æŒ‰é’®çŠ¶æ€
      readMoreBtn.classList.remove('hidden');
      readLessBtnSimple.classList.add('hidden');
      // å…³é—­æŒ‰é’®ä½ç½®
      closeModalBtn.style.right = '0.2rem';
      closeModalBtn.style.top = '0.2rem';
    }

    function switchToReadMoreView() {
      modalSimpleView.classList.add('hidden');
      modalReadMoreView.classList.remove('hidden');
      // æ›´æ–°æŒ‰é’®çŠ¶æ€
      readMoreBtn.classList.add('hidden');
      readLessBtnSimple.classList.remove('hidden');
      // å…³é—­æŒ‰é’®ä½ç½®
      closeModalBtn.style.right = '1rem';
      closeModalBtn.style.top = '0.5rem';
    }

    // === ç›¸å†Œæ”¾å¤§åŠŸèƒ½ ===
    let lightboxOverlay = null;
    let lightboxImg = null;
    let isLightboxOpen = false;

    function initLightbox() {
      if (lightboxOverlay) return;
      lightboxOverlay = document.createElement('div');
      lightboxOverlay.id = 'lightboxOverlay';
      lightboxOverlay.innerHTML = `
        <div class="lightbox-content">
          <img id="lightboxImage" src="" alt="Preview">
          <button id="closeLightbox" class="lightbox-close">&times;</button>
        </div>
      `;
      document.body.appendChild(lightboxOverlay);

      lightboxImg = document.getElementById('lightboxImage');
      document.getElementById('closeLightbox').addEventListener('click', () => {
        lightboxOverlay.style.display = 'none';
        isLightboxOpen = false;
      });
      lightboxOverlay.addEventListener('click', (e) => {
        if (e.target === lightboxOverlay) lightboxOverlay.style.display = 'none';
      });
    }

    function showLightbox(src) {
      initLightbox();
      lightboxImg.src = src;
      lightboxOverlay.style.display = 'flex';
      isLightboxOpen = true;
    }

    // === æ ¸å¿ƒï¼šæ‰“å¼€ Modal ===
    async function openModal(data) {
      currentData = data;
      document.body.style.overflow = 'hidden';

      // === 1. æ¸²æŸ“åŸºç¡€ä¿¡æ¯ ===
      // modalTitle.textContent = modalTitle2.textContent = modalTitle3.textContent = data.title || '';
      // modalMeta.textContent = modalMeta2.textContent = modalMeta3.textContent = data.meta || '';
      modalTitle.textContent = modalTitle2.textContent = data.title || '';
      modalMeta.textContent = modalMeta2.textContent = data.meta || '';
      renderTags(data.tag, modalTag);
      renderTags(data.tag, modalTag2);
      // renderTags(data.tag, modalTag3);

      // ç®€æ˜“æ¨¡å¼æè¿°
      modalDescriptionEl.innerHTML = data.description
        ? `<div class="modal-description">${data.description}</div>`
        : '<p class="text-slate-500">æš‚æ— æè¿°ã€‚</p>';

      // Hero æè¿°ï¼ˆå®Œæ•´å†…å®¹ï¼‰
      heroDescription.innerHTML = data.description
        ? `<div class="text-white">${data.description}</div>`
        : '<p class="text-white/80">æš‚æ— æè¿°ã€‚</p>';

      // === 2. æå–å›¾ç‰‡åˆ—è¡¨ ===
      let coverImage = data.image || null;
      let galleryImages = coverImage ? [coverImage] : [];

      let mdText = '';
      if (data.markdown) {
        try {
          const res = await fetch(data.markdown);
          if (!res.ok) throw new Error('Markdown not found');
          mdText = await res.text();

          const basePath = data.markdown.substring(0, data.markdown.lastIndexOf('/') + 1);
          // 1. ä» ![](xxx) æå–èµ„æº
          const imageRegex = /!\[.*?\]\((?!https?:\/\/)([^)\s]+)\)/g;
          let match;
          while ((match = imageRegex.exec(mdText)) !== null) {
            const relPath = match[1].startsWith('./') ? match[1].slice(2) : match[1];
            const fullUrl = basePath + relPath;
            if (!galleryImages.includes(fullUrl)) {
              galleryImages.push(fullUrl);
            }
          }

          // 2. ä» <video src="xxx"> æˆ– <source src="xxx"> æå–è§†é¢‘èµ„æº
          const videoRegex = /<(video|source)\b[^>]*src\s*=\s*["'](?!(?:https?:)?\/\/)([^"']+)["']/gi;
          let videoMatch;
          while ((videoMatch = videoRegex.exec(mdText)) !== null) {
            const relPath = videoMatch[2].startsWith('./') ? videoMatch[2].slice(2) : videoMatch[2];
            const fullUrl = basePath + relPath;
            if (!galleryImages.includes(fullUrl)) {
              galleryImages.push(fullUrl);
            }
          }
        } catch (err) {
          console.error('åŠ è½½ Markdown å¤±è´¥:', err);
        }
      }

      // === 3. æ¸²æŸ“ç›¸å†Œï¼ˆæ”¯æŒå›¾ç‰‡ä¸è§†é¢‘ï¼‰ ===
      if (galleryImages.length > 0) {
        modalImageContainer.innerHTML = '<div class="image-gallery"></div>';
        const galleryEl = modalImageContainer.querySelector('.image-gallery');
        modalImageContainer.style.display = 'block';

        galleryImages.forEach((src, i) => {
          const ext = src.split('.').pop().toLowerCase();
          let el;

          if (['mp4', 'webm', 'ogg'].includes(ext)) {
            // è§†é¢‘æ–‡ä»¶
            el = document.createElement('video');
            el.controls = true;
            el.muted = true;
            el.playsInline = true;
            el.loop = true;
            el.src = src;
            el.dataset.index = i;
            el.classList.add('gallery-video');
          } else {
            // å›¾ç‰‡æ–‡ä»¶
            el = document.createElement('img');
            el.src = src;
            el.alt = `Gallery ${i + 1}`;
            el.loading = 'lazy';
            el.dataset.index = i;

            el.addEventListener('click', () => showLightbox(src));
          }

          el.onerror = () => {
            console.warn('åª’ä½“åŠ è½½å¤±è´¥ï¼Œå·²è·³è¿‡:', src);
            el.remove();
          };

          galleryEl.appendChild(el);
        });
      } else {
        modalImageContainer.style.display = 'none';
      }

      // === 4. è®¾ç½® Hero å›¾ ===
      if (galleryImages.length > 0) {
        modalHeroImage.src = galleryImages[0];
        modalHeroImage.alt = data.title || '';
      }

      // === 5. æ¸²æŸ“ Markdown ===
      let mdHTML = '';
      if (mdText && data.markdown) {
        const basePath = data.markdown.substring(0, data.markdown.lastIndexOf('/') + 1);
        let fixedMdText = mdText.replace(/!\[(.*?)\]\((?!https?:\/\/)(.*?)\)/g, (match, alt, src) => {
          const cleanSrc = src.startsWith('./') ? src.slice(2) : src;
          return `![${alt}](${basePath}${cleanSrc})`;
        });

        fixedMdText = fixedMdText.replace(
          /(<(video|source)\b[^>]*src\s*=\s*["'])(?!(?:https?:)?\/\/)([^"']+)/gi,
          (match, prefix, tag, src) => {
            const cleanSrc = src.startsWith('./') ? src.slice(2) : src;
            return `${prefix}${basePath}${cleanSrc}`;
          }
        );
        mdHTML = marked.parse(fixedMdText);
      } else if (data.markdown) {
        mdHTML = '<p class="text-red-500">å†…å®¹åŠ è½½å¤±è´¥ã€‚</p>';
      }

      modalMarkdownBody.innerHTML = mdHTML;

      // === 6. åˆå§‹åŒ–çŠ¶æ€ ===
      switchToSimpleView(); // é»˜è®¤æ˜¾ç¤ºç®€æ˜“æ¨¡å¼
      // modalReadMoreView.removeEventListener('scroll', handleScrollNav);
      // modalReadMoreView.addEventListener('scroll', handleScrollNav);

      // ç»‘å®šæŒ‰é’®äº‹ä»¶
      readMoreBtn?.addEventListener('click', switchToReadMoreView);
      readLessBtnSimple?.addEventListener('click', switchToSimpleView);
      readLessBtnHero?.addEventListener('click', switchToSimpleView);
      readLessBtnNav?.addEventListener('click', switchToSimpleView);

      modalOverlay.classList.add('show');
    }

    // === å…³é—­é€»è¾‘ ===
    closeModalBtn?.addEventListener('click', () => {
      modalOverlay.classList.remove('show');
      document.body.style.overflow = '';
      // modalReadMoreView.removeEventListener('scroll', handleScrollNav);
    });

    modalOverlay?.addEventListener('click', (e) => {
      if (e.target === modalOverlay) closeModalBtn?.click();
    });

    // === ESC å…³é—­ ===
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        if (isLightboxOpen) {
          // ä¼˜å…ˆå…³é—­ Lightbox
          document.getElementById('closeLightbox').click();
        } else if (modalOverlay.classList.contains('show')) {
          // å¦åˆ™å…³é—­ Modal
          closeModalBtn?.click();
        }
      }
    });

    // === æ¨¡å¼åˆ‡æ¢ ===
    const body = document.body;
    // è®¾ç½®å›¾æ ‡å‡½æ•°ï¼ˆæ”¯æŒä¼ å…¥ elementï¼‰
    function setModeIcon(element, isDark) {
      const sunSVG = `<circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="M4.93 4.93l1.41 1.41"/><path d="M17.66 17.66l1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="M6.34 17.66l1.41-1.41"/><path d="M19.07 4.93l-1.41-1.41"/>`;
      const moonSVG = `<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>`;
      element.innerHTML = isDark ? moonSVG : sunSVG;
    }

    // åˆå§‹åŒ–æ‰€æœ‰ mode-toggle æŒ‰é’®çš„å›¾æ ‡
    function initAllModeToggles() {
      const allToggles = document.querySelectorAll('.mode-toggle');
      const savedMode = localStorage.getItem('color-mode');
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      const isDark = savedMode === 'dark' || (!savedMode && prefersDark);

      body.classList.toggle('dark', isDark);
      allToggles.forEach(toggle => {
        const icon = toggle.querySelector('.mode-icon');
        if (icon) setModeIcon(icon, isDark);
      });
    }

    // åˆ‡æ¢ä¸»é¢˜ï¼ˆå…¨å±€ï¼‰
    function toggleTheme() {
      const isNowDark = body.classList.contains('dark');
      const newMode = isNowDark ? 'light' : 'dark';

      body.classList.toggle('dark', !isNowDark);
      localStorage.setItem('color-mode', newMode);

      // æ›´æ–°æ‰€æœ‰å›¾æ ‡
      document.querySelectorAll('.mode-icon').forEach(icon => {
        setModeIcon(icon, !isNowDark);
      });
    }

    // åˆå§‹åŒ–
    initAllModeToggles();

    // ç›‘å¬æ‰€æœ‰ .mode-toggle ç‚¹å‡»
    document.addEventListener('click', (e) => {
      if (e.target.closest('.mode-toggle')) {
        toggleTheme();
      }
    });

    // === æ ‡ç­¾æ»šåŠ¨é«˜äº® ===
    const navLinks = document.querySelectorAll('.nav-link');
    const sections = ['home', 'ai-section', 'code-section', 'design-section', 'experience-section', 'about'];

    window.addEventListener('scroll', () => {
      const viewportCenter = window.scrollY + window.innerHeight / 2;

      let activeId = null;

      for (const id of sections) {
        const el = document.getElementById(id);
        if (!el) continue;

        const { offsetTop, offsetHeight } = el;
        const offsetBottom = offsetTop + offsetHeight;

        if (viewportCenter >= offsetTop && viewportCenter <= offsetBottom) {
          activeId = id;
          break;
        }
      }

      // æ›´æ–°é«˜äº®
      navLinks.forEach(link => link.classList.remove('active'));
      if (activeId) {
        document.querySelector(`a[href="#${activeId}"]`)?.classList.add('active');
      }
    });

    // === è‡ªå®šä¹‰é”šç‚¹è·³è½¬ï¼ˆå±…ä¸­ï¼‰===
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        const href = this.getAttribute('href');
        if (!href || href === '#') return;

        const targetId = href.substring(1);
        const targetEl = document.getElementById(targetId);

        if (targetEl) {
          e.preventDefault();

          // è®¡ç®—ç›®æ ‡å…ƒç´ åº”æ»šåŠ¨åˆ°çš„ä½ç½®ï¼šä½¿å…¶å‚ç›´å±…ä¸­
          const rect = targetEl.getBoundingClientRect();
          const scrollTop = window.scrollY;
          const targetTop = scrollTop + rect.top;
          const viewportHeight = window.innerHeight;

          // ç†æƒ³å±…ä¸­ä½ç½®ï¼šè®© targetEl ä¸­å¿ƒ = è§†å£ä¸­å¿ƒ
          let scrollToY = targetTop - viewportHeight / 2 + targetEl.offsetHeight / 2;

          // è¾¹ç•Œä¿æŠ¤ï¼šä¸èƒ½æ»šåˆ°è´Ÿå€¼ï¼Œä¹Ÿä¸èƒ½è¶…è¿‡æ–‡æ¡£åº•éƒ¨
          const maxScroll = document.body.scrollHeight - viewportHeight;
          scrollToY = Math.max(0, Math.min(scrollToY, maxScroll));

          // å¹³æ»‘æ»šåŠ¨
          window.scrollTo({
            top: scrollToY,
            behavior: 'smooth'
          });
        }
      });
    });

    // Hero BG change
    document.addEventListener('DOMContentLoaded', function () {
      const backgrounds = [
        'assets/images/background/01.mp4',
        'assets/images/background/02.png',
        'assets/images/background/03.jpg',
        'assets/images/background/04.png',
        'assets/images/background/05.jpg',
      ];

      const heroBg = document.querySelector('.hero-bg');
      const heroVideo = document.querySelector('.hero-video');
      const videoSource = heroVideo?.querySelector('source');
      const indicators = document.querySelectorAll('.hero-slider-indicators .indicator');

      if (!heroBg || !heroVideo || indicators.length === 0) {
        console.warn('Hero elements missing');
        return;
      }

      let currentIndex = -1; // åˆå§‹ä¸º -1ï¼Œè¡¨ç¤ºå°šæœªåˆå§‹åŒ–
      let autoSlideTimeout = null;

      // é¢„åŠ è½½èµ„æº
      backgrounds.forEach(src => {
        if (src.endsWith('.mp4')) {
          const v = document.createElement('video');
          v.muted = true;
          v.preload = 'metadata';
          v.src = src;
        } else {
          const img = new Image();
          img.src = src;
        }
      });

      // åˆ‡æ¢åˆ°æŒ‡å®šç´¢å¼•
      function goToSlide(index, isManual = false) {
        if (index < 0 || index >= backgrounds.length || index === currentIndex) return;

        const prevIsVideo = currentIndex >= 0 && backgrounds[currentIndex].endsWith('.mp4');
        const isVideo = backgrounds[index].endsWith('.mp4');

        // éšè—ä¸Šä¸€ä¸ª
        if (prevIsVideo) {
          heroVideo.style.display = 'none';
        } else {
          heroBg.classList.remove('active');
        }

        // æ˜¾ç¤ºå½“å‰
        if (isVideo) {
          videoSource.src = backgrounds[index];
          heroVideo.load();
          heroVideo.style.display = 'block';
          // å°è¯•æ’­æ”¾ï¼ˆé™éŸ³è§†é¢‘é€šå¸¸å¯ autoplayï¼‰
          heroVideo.play().catch(e => console.warn('Play failed:', e));
        } else {
          heroBg.style.backgroundImage = `url('${backgrounds[index]}')`;
          // å…³é”®ï¼šå…ˆç¡®ä¿æ²¡æœ‰ activeï¼Œå†å¼ºåˆ¶é‡æ’ï¼Œå†åŠ  active
          heroBg.classList.remove('active');
          void heroBg.offsetWidth; // è§¦å‘é‡æ’
          heroBg.classList.add('active');
        }

        // æ›´æ–°çŠ¶æ€
        currentIndex = index;

        // æ›´æ–°æŒ‡ç¤ºå™¨
        indicators.forEach((ind, i) => {
          ind.classList.toggle('active', i === index);
        });

        // é‡ç½®è‡ªåŠ¨è½®æ’­
        if (isManual) {
          resetAutoSlide();
        } else {
          scheduleNextSlide();
        }
      }

      function scheduleNextSlide() {
        clearTimeout(autoSlideTimeout);
        autoSlideTimeout = setTimeout(() => {
          goToSlide((currentIndex + 1) % backgrounds.length);
        }, 3000);
      }

      function resetAutoSlide() {
        clearTimeout(autoSlideTimeout);
        scheduleNextSlide();
      }

      // ç»‘å®šç‚¹å‡»
      indicators.forEach((ind, i) => {
        ind.addEventListener('click', () => goToSlide(i, true));
      });

      goToSlide(0); // ä» 0 å¼€å§‹ï¼Œä¼šæ­£ç¡®æ’­æ”¾è§†é¢‘ + è§¦å‘ transition
    });
  </script>
  <script>
    console.log("ğŸ“Œ WebP loader initialized...");

    // Helper: å°è¯•æ›¿æ¢ä¸º WebP
    function tryReplaceWithWebP(el) {
      const src = el.getAttribute("src");
      if (!src) return;

      if (/\.(jpg|jpeg|png)$/i.test(src)) {
        const webpSrc = src.replace(/\.(jpg|jpeg|png)$/i, ".webp");

        // URL encode ä¸­æ–‡/ç©ºæ ¼
        const encodedWebpSrc = encodeURI(webpSrc);

        fetch(encodedWebpSrc, { method: 'HEAD' })
          .then(response => {
            if (response.ok) {
              console.log(`âœ… WebP found and used: ${encodedWebpSrc}`);
              el.setAttribute("src", encodedWebpSrc);
            } else {
              console.log(`âŒ WebP not found, keeping original: ${src}`);
            }
          })
          .catch(err => {
            console.log(`âš ï¸ Error checking WebP: ${encodedWebpSrc}`, err);
          });
      }
    }

    // æ›¿æ¢å·²å­˜åœ¨çš„å›¾ç‰‡
    document.querySelectorAll("img").forEach(tryReplaceWithWebP);

    // ç›‘å¬åŠ¨æ€æ’å…¥çš„å›¾ç‰‡
    const observer = new MutationObserver(mutations => {
      mutations.forEach(mutation => {
        mutation.addedNodes.forEach(node => {
          if (node.nodeType === 1) { // element
            if (node.tagName.toLowerCase() === 'img') {
              tryReplaceWithWebP(node);
            } else {
              node.querySelectorAll?.("img").forEach(tryReplaceWithWebP);
            }
          }
        });
      });
    });

    observer.observe(document.body, { childList: true, subtree: true });
    </script>
</body>
</html>